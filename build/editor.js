(()=>{"use strict";const e=window.wp.i18n,s=window.wp.hooks,t=window.wp.compose,l=window.wp.blockEditor,i=window.wp.components,o=window.wp.element,r=window.ReactJSXRuntime;(0,s.addFilter)("blocks.registerBlockType","block-style-modifiers/add-style-modifiers-attribute",e=>(e.attributes={...e.attributes,styleModifiers:{type:"array",default:[]}},e));const a=(0,t.createHigherOrderComponent)(s=>t=>{const{name:a,attributes:c,setAttributes:n}=t,d=(e=>{const s=window.__BLOCK_STYLE_MODIFIERS__||{},t=s["*"]||{};if(Array.isArray(e)){let l={...t};return e.forEach(e=>{const t=s[e]||{};l={...l,...t}}),Object.values(l).map(e=>({class:e.class,label:e.label||e.name,description:e.description||"",category:e.category||"Uncategorized",name:e.name}))}{const l=s[e]||{},i={...t,...l};return Object.values(i).map(e=>({class:e.class,label:e.label||e.name,description:e.description||"",category:e.category||"Uncategorized",name:e.name}))}})(a),m=d.reduce((e,s)=>{const t=s.category||"Uncategorized";return e[t]||(e[t]=[]),e[t].push(s),e},{}),f=c.styleModifiers||[],[y,b]=(0,o.useState)(null),p=e=>{const s=f.includes(e);n(s?{styleModifiers:f.filter(s=>s!==e)}:{styleModifiers:[...f,e]})},_=()=>{b(null)},u=f.map(e=>d.find(s=>s.class===e)||{class:e,label:e});return(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(s,{...t}),(0,r.jsx)(l.InspectorControls,{children:(0,r.jsxs)(i.PanelBody,{title:(0,e.__)("Style Modifiers","block-style-modifiers"),initialOpen:!0,children:[f.length>0&&(0,r.jsxs)("div",{className:"block-style-modifiers__section",children:[(0,r.jsx)("strong",{className:"block-style-modifiers__section-title",children:(0,e.__)("Selected Modifiers","block-style-modifiers")}),(0,r.jsx)("ul",{className:"block-style-modifiers__selected-list",children:u.map((s,t)=>(0,r.jsxs)("li",{draggable:!0,onDragStart:e=>((e,s)=>{b(s),e.dataTransfer.effectAllowed="move"})(e,t),onDragOver:e=>(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"})(e),onDrop:e=>((e,s)=>{if(e.preventDefault(),null===y||y===s)return;const t=[...f],[l]=t.splice(y,1);t.splice(s,0,l),n({styleModifiers:t}),b(null)})(e,t),onDragEnd:_,title:s.description||s.label,className:"block-style-modifiers__selected-item"+(y===t?" block-style-modifiers__selected-item--dragged":""),children:[(0,r.jsxs)("span",{className:"block-style-modifiers__selected-item-label",children:["⋮⋮ ",s.label]}),(0,r.jsx)(i.Button,{isSmall:!0,variant:"tertiary",icon:"no-alt",onClick:()=>p(s.class),label:(0,e.__)("Remove","block-style-modifiers")})]},s.class))})]}),0===f.length&&(0,r.jsx)("p",{className:"block-style-modifiers__empty",children:(0,e.__)("No modifiers selected.","block-style-modifiers")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"block-style-modifiers__available-title",children:(0,e.__)("Available Modifiers","block-style-modifiers")}),Object.keys(m).map(e=>(0,r.jsx)(i.PanelBody,{title:e,initialOpen:!1,children:m[e].map(e=>(0,r.jsx)(i.CheckboxControl,{label:e.label,title:e.description,checked:f.includes(e.class),onChange:()=>p(e.class),__nextHasNoMarginBottom:!0},e.class))},e))]})]})})]})},"withStyleModifiers");(0,s.addFilter)("editor.BlockEdit","block-style-modifiers/with-style-modifiers",a),(0,s.addFilter)("blocks.getSaveContent.extraProps","block-style-modifiers/apply-style-modifiers",(e,s,t)=>{if(!t?.styleModifiers?.length)return e;const l=e.className?e.className.split(" "):[];return e.className=[...l,...t.styleModifiers].join(" "),e});const c=(0,t.createHigherOrderComponent)(e=>s=>{const{attributes:t}=s;if(!t?.styleModifiers?.length)return(0,r.jsx)(e,{...s});const l=t.styleModifiers.join(" ");return(0,r.jsx)(e,{...s,className:s.className?`${s.className} ${l}`:l})},"withStyleModifiersOnEditor");(0,s.addFilter)("editor.BlockListBlock","block-style-modifiers/apply-style-modifiers-editor",c)})();